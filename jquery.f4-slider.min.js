/*! FAKTOR VIER Slider v1.0.5 | (c) 2015 FAKTOR VIER GmbH | http://faktorvier.ch */
(function(b){b.f4slider={global:{attrKeysEnabled:"data-slider-keys-enabled",allKeys:[],videoPluginAvailable:!1},config:{attrInit:"data-slider-init",attrSlider:"data-slider",attrSlide:"data-slide",attrSlideCurrent:"data-slide-current",attrSlideElement:"data-slide-element",attrSlideIn:"data-slide-in",attrSlideOut:"data-slide-out",attrSlidePrev:"data-slide-prev",attrSlideNext:"data-slide-next",attrTriggerRef:"data-slider-ref",attrTrigger:"data-slide-trigger",attrTriggerCurrent:"data-slide-trigger-current",
valueTriggerPrev:"prev",valueTriggerNext:"next",enableKeys:!0,keyNext:39,keyPrev:37,enableSwipe:!0,onSwipeLeft:function(b){},onSwipeRight:function(b){},sliderInitDelay:1E3,autoPlay:!0,autoPlayTimeout:7E3,attrPauseAutoPlay:"data-slide-pause-autoplay",videoAutoPlay:!0,videoAutoPlayOnSlideStart:!0,videoPluginDefaultBehavior:!1,attrVideo:"data-slide-video",attrVideoAutoPlay:"data-slide-video-autoplay",onSlideInStart:function(b){},onSlideInEnd:function(b){},onSlideOutStart:function(b){},onSlideOutEnd:function(b){}}};
b.f4slider.bindKeys=function(){b.f4slider.unbindKeys();b(window).bind("keyup.f4slider",function(c){c.preventDefault();if(-1!=b.inArray(c.keyCode,b.f4slider.global.allKeys)){var a=b("["+b.f4slider.global.attrKeysEnabled+"]").filter(":visible").filter(function(){var a=b(window).scrollTop(),d=a+b(window).height(),c=b(this).offset().top,f=c+b(this).height();return c<=d&&f>=a||f>=a&&c<=d}).first();if(a.length){var l=a.data("f4slider").config;c.keyCode==l.keyNext&&(c.preventDefault(),a.f4slider("next"));
c.keyCode==l.keyPrev&&(c.preventDefault(),a.f4slider("previous"))}}})};b.f4slider.unbindKeys=function(){b(window).unbind("keyup.f4slider")};b.fn.f4slider=function(c){b.f4slider.global.videoPluginAvailable="undefined"!=typeof b.video;var a=null,l=null;"string"==typeof c?l=c:(a=b.extend(b.extend({},b.f4slider.config),c),a.enableKeys&&b.f4slider.bindKeys());return this.each(function(){var c=null;"undefined"!==typeof b(this).data("f4slider")&&(a=b(this).data("f4slider").config,c=b(this).data("f4slider-timeout"));
var d=b(this),k=d.attr(a.attrSlider),f=d.find("["+a.attrSlide+"]"),t=f.find("["+a.attrVideo+"]"),x=b.f4slider.global.videoPluginAvailable&&a.videoPluginDefaultBehavior&&t.length,m=[],k=b("["+a.attrTriggerRef+'="'+k+'"]'),m=0<k.length?k:d.find("["+a.attrTrigger+"]"),p=f.length,q=p-1,e=null,u=null,g=0;0<p&&(e=f.filter("["+a.attrSlideCurrent+"]"),u=m.filter("["+a.attrTriggerCurrent+"]"),g=-1==f.index(e)?0:f.index(e));var k=function(){d.data("f4slider",{config:a,sliderTimeout:c});b.f4slider.global.allKeys.push(a.keyPrev);
b.f4slider.global.allKeys.push(a.keyNext);x&&(t.video(),e.find("["+a.attrVideo+"]["+a.attrVideoAutoPlay+"]").video("play"));1<p?0>=a.sliderInitDelay?(d.attr(b.f4slider.global.attrKeysEnabled,""),d.attr(a.attrInit,""),n(g),y()):setTimeout(function(){d.attr(b.f4slider.global.attrKeysEnabled,"");d.attr(a.attrInit,"");n(g);y()},a.sliderInitDelay):1==p&&(d.attr(a.attrInit,""),n(g))},y=function(){x&&t.addVideoEvent("play",function(a,b){clearTimeout(c)});m.on("click",function(c){c.preventDefault();c=b(this);
if("undefined"==typeof c.attr(a.attrTriggerCurrent)){c=c.attr(a.attrTrigger);var h=0;isNaN(parseInt(c))?(h="prev"==c?g-1:g+1,h>q&&(h=0),0>h&&(h=q)):h=parseInt(c);n(h)}});a.autoPlay&&d.find("["+a.attrPauseAutoPlay+"]").addBack("["+a.attrPauseAutoPlay+"]").bind("mouseenter",function(a){a.stopPropagation();clearTimeout(c);b(this).one("mouseleave",function(){r()})});a.enableSwipe&&"undefined"!=typeof d.swipe&&d.swipe({swipeLeft:function(){v();a.onSwipeLeft(b(this))},swipeRight:function(){z();a.onSwipeRight(b(this))}})},
r=function(){clearTimeout(c);1<f.length&&(c=setTimeout(function(){v()},a.autoPlayTimeout),d.data("f4slider-timeout",c))},w=function(d){d.find("["+a.attrVideo+"]["+a.attrVideoAutoPlay+"]").each(function(){var a=b(this);"video"==a.prop("tagName").toLowerCase()&&(a.get(0).play(),a.get(0).paused&&r());if("iframe"==a.prop("tagName").toLowerCase()&&-1!==a.attr("src").indexOf("youtu")){clearTimeout(c);var d=a.attr("src").replace("&amp;","&").replace(/\autoplay=[0-9]{1}/,"").replace("?&","?").replace("??",
"?").replace(/[\?&]$/,"").replace("&","&amp;"),d=d+(-1===d.indexOf("?")?"?":"&")+"autoplay=1";a.attr("src",d)}})},A=function(c){c.find("["+a.attrVideo+"]").each(function(){var a=b(this);"video"==a.prop("tagName").toLowerCase()&&a.get(0).pause();if("iframe"==a.prop("tagName").toLowerCase()&&-1!==a.attr("src").indexOf("youtu")){var c=a.attr("src").replace("&amp;","&").replace(/\autoplay=[0-9]{1}/,"").replace("?&","?").replace("??","?").replace(/[\?&]$/,"").replace("&","&amp;");a.attr("src",c)}})},n=
function(c){a.autoPlay&&r();$previousSlide=e;"undefined"!=typeof $previousSlide.attr(a.attrSlide)&&($previousSlide.attr(a.attrSlide)<c?d.attr(a.attrSlideNext,""):d.attr(a.attrSlidePrev,""));a.onSlideOutStart($previousSlide);A($previousSlide);var h=!1;$previousSlide.one("transitionend webkitTransitionEnd oTransitionEnd",function(c){if(h)return!1;b(this).removeAttr(a.attrSlideOut);d.removeAttr(a.attrSlidePrev);d.removeAttr(a.attrSlideNext);a.onSlideOutEnd(b(this));h=!0});e.attr(a.attrSlideOut,"");f.removeAttr(a.attrSlideCurrent);
m.removeAttr(a.attrTriggerCurrent);g=c;e=f.filter("["+a.attrSlide+'="'+g+'"]');e.attr(a.attrSlideCurrent,"").attr(a.attrSlideIn,"");u=m.filter("["+a.attrTrigger+'="'+g+'"]');u.attr(a.attrTriggerCurrent,"");a.onSlideInStart(e);var k=!1;a.videoAutoPlayOnSlideStart&&w(e);e.one("transitionend webkitTransitionEnd oTransitionEnd",function(c){if(k)return!1;b(this).removeAttr(a.attrSlideIn);a.onSlideInEnd(b(this));a.videoAutoPlayOnSlideStart||w(e);k=!0})},v=function(){var a=g+1;a>q&&(a=0);n(a)},z=function(){var a=
g-1;0>a&&(a=q);n(a)};if(null===l)k();else switch(l){case "previous":z();break;case "next":v();break;case "stopVideoAutoplay":A(e);break;case "startVideoAutoplay":w(e);break;case "startAutoplay":r();break;case "stopAutoplay":clearTimeout(c);break;case "destroy":d.removeData("f4slider"),d.removeAttr(b.f4slider.global.attrKeysEnabled),d.removeAttr(a.attrInit),f.removeAttr(a.attrSlideCurrent),m.removeAttr(a.attrTriggerCurrent),clearTimeout(c),f.unbind("transitionEnd webkitTransitionEnd oTransitionEnd")}})}})(jQuery);