/* FAKTOR VIER Slider v1.0.10 | (c) 2017 FAKTOR VIER GmbH | http://faktorvier.ch */
(function(b){b.f4slider={global:{attrKeysEnabled:"data-slider-keys-enabled",allKeys:[],videoPluginAvailable:!1},config:{attrInit:"data-slider-init",attrSlider:"data-slider",attrSliderHidden:"data-slider-hidden",attrSlide:"data-slide",attrSlideCurrent:"data-slide-current",attrSlideElement:"data-slide-element",attrSlideIn:"data-slide-in",attrSlideOut:"data-slide-out",attrSlidePrev:"data-slide-prev",attrSlideNext:"data-slide-next",attrTriggerRef:"data-slider-ref",attrTrigger:"data-slide-trigger",attrTriggerCurrent:"data-slide-trigger-current",
valueTriggerPrev:"prev",valueTriggerNext:"next",enableKeys:!0,keyNext:39,keyPrev:37,enableSwipe:!0,onSwipeLeft:function(b){},onSwipeRight:function(b){},sliderInitDelay:1E3,autoPlay:!0,autoPlayTimeout:7E3,attrPauseAutoPlay:"data-slide-pause-autoplay",videoAutoPlay:!0,videoAutoPlayOnSlideStart:!0,videoPluginDefaultBehavior:!1,attrVideo:"data-slide-video",attrVideoAutoPlay:"data-slide-video-autoplay",onSlideInStart:function(b){},onSlideInEnd:function(b){},onSlideOutStart:function(b){},onSlideOutEnd:function(b){}}};
b.f4slider.bindKeys=function(){b.f4slider.unbindKeys();b(window).bind("keyup.f4slider",function(d){d.preventDefault();if(-1!=b.inArray(d.keyCode,b.f4slider.global.allKeys)){var a=b("["+b.f4slider.global.attrKeysEnabled+"]").filter(":visible").filter(function(){var a=b(this);if(a.is("["+a.data("f4slider").config.attrSliderHidden+"]"))return!1;var e=b(window).scrollTop(),d=e+b(window).height(),f=a.offset().top,a=f+a.height();return f<=d&&a>=e||a>=e&&f<=d}).first();if(a.length){var m=a.data("f4slider").config;
d.keyCode==m.keyNext&&(d.preventDefault(),a.f4slider("next"));d.keyCode==m.keyPrev&&(d.preventDefault(),a.f4slider("previous"))}}})};b.f4slider.unbindKeys=function(){b(window).unbind("keyup.f4slider")};b.fn.f4slider=function(d){b.f4slider.global.videoPluginAvailable="undefined"!=typeof b.video;var a=null,m=null;"string"==typeof d?m=d:(a=b.extend(b.extend({},b.f4slider.config),d),a.enableKeys&&b.f4slider.bindKeys());return this.each(function(){var d=null;"undefined"!==typeof b(this).data("f4slider")&&
(a=b(this).data("f4slider").config,d=b(this).data("f4slider-timeout"));var e=b(this),k=e.attr(a.attrSlider),f=e.find("["+a.attrSlide+"]"),t=f.find("["+a.attrVideo+"]"),y=b.f4slider.global.videoPluginAvailable&&a.videoPluginDefaultBehavior&&t.length,l=[],k=b("["+a.attrTriggerRef+'="'+k+'"]');0<k.length?(l=k.find("["+a.attrTrigger+"]"),0===l.length&&(l=k)):l=e.find("["+a.attrTrigger+"]");var p=f.length,q=p-1,g=null,u=null,h=0;0<p&&(g=f.filter("["+a.attrSlideCurrent+"]"),u=l.filter("["+a.attrTriggerCurrent+
"]"),h=-1==f.index(g)?0:f.index(g));var v=!1,k=function(){e.data("f4slider",{config:a,sliderTimeout:d});b.f4slider.global.allKeys.push(a.keyPrev);b.f4slider.global.allKeys.push(a.keyNext);y&&(t.video(),g.find("["+a.attrVideo+"]["+a.attrVideoAutoPlay+"]").video("play"));1<p?0>=a.sliderInitDelay?(e.attr(b.f4slider.global.attrKeysEnabled,""),e.attr(a.attrInit,""),n(h),z()):setTimeout(function(){e.attr(b.f4slider.global.attrKeysEnabled,"");e.attr(a.attrInit,"");n(h);z()},a.sliderInitDelay):1==p&&(e.attr(a.attrInit,
""),n(h))},z=function(){y&&t.addVideoEvent("play",function(a,b){clearTimeout(d)});l.on("click",function(c){c.preventDefault();c=b(this);"undefined"==typeof c.attr(a.attrTriggerCurrent)&&(c=c.attr(a.attrTrigger),isNaN(parseInt(c))?(c="prev"==c?h-1:h+1,c>q&&(c=0),0>c&&(c=q)):c=parseInt(c),n(c))});a.autoPlay&&e.find("["+a.attrPauseAutoPlay+"]").addBack("["+a.attrPauseAutoPlay+"]").bind("mouseenter",function(a){a.stopPropagation();v=!0;clearTimeout(d);b(this).one("mouseleave",function(){v=!1;r()})});
a.enableSwipe&&"undefined"!=typeof e.swipe&&e.swipe({swipeLeft:function(){w();a.onSwipeLeft(b(this))},swipeRight:function(){A();a.onSwipeRight(b(this))}})},r=function(){clearTimeout(d);1<f.length&&(d=setTimeout(function(){w()},a.autoPlayTimeout),e.data("f4slider-timeout",d))},x=function(c){c.find("["+a.attrVideo+"]["+a.attrVideoAutoPlay+"]").each(function(){var a=b(this);"video"==a.prop("tagName").toLowerCase()&&(a.get(0).play(),a.get(0).paused&&r());if("iframe"==a.prop("tagName").toLowerCase()&&
-1!==a.attr("src").indexOf("youtu")){clearTimeout(d);var c=a.attr("src").replace("&amp;","&").replace(/\autoplay=[0-9]{1}/,"").replace("?&","?").replace("??","?").replace(/[\?&]$/,"").replace("&","&amp;"),c=c+(-1===c.indexOf("?")?"?":"&")+"autoplay=1";a.attr("src",c)}})},B=function(c){c.find("["+a.attrVideo+"]").each(function(){var a=b(this);"video"==a.prop("tagName").toLowerCase()&&a.get(0).pause();if("iframe"==a.prop("tagName").toLowerCase()&&-1!==a.attr("src").indexOf("youtu")){var c=a.attr("src").replace("&amp;",
"&").replace(/\autoplay=[0-9]{1}/,"").replace("?&","?").replace("??","?").replace(/[\?&]$/,"").replace("&","&amp;");a.attr("src",c)}})},n=function(c){a.autoPlay&&!v&&r();$previousSlide=g;"undefined"!=typeof $previousSlide.attr(a.attrSlide)&&($previousSlide.attr(a.attrSlide)<c?e.attr(a.attrSlideNext,""):e.attr(a.attrSlidePrev,""));a.onSlideOutStart($previousSlide);B($previousSlide);var d=!1;C($previousSlide,function(c){if(d)return!1;b(this).removeAttr(a.attrSlideOut);e.removeAttr(a.attrSlidePrev);
e.removeAttr(a.attrSlideNext);a.onSlideOutEnd(b(this));d=!0});g.attr(a.attrSlideOut,"");f.removeAttr(a.attrSlideCurrent);l.removeAttr(a.attrTriggerCurrent);h=c;g=f.filter("["+a.attrSlide+'="'+h+'"]');g.attr(a.attrSlideCurrent,"").attr(a.attrSlideIn,"");u=l.filter("["+a.attrTrigger+'="'+h+'"]');u.attr(a.attrTriggerCurrent,"");a.onSlideInStart(g);var k=!1;a.videoAutoPlayOnSlideStart&&x(g);C(g,function(c){if(k)return!1;b(this).removeAttr(a.attrSlideIn);a.onSlideInEnd(b(this));a.videoAutoPlayOnSlideStart||
x(g);k=!0})},w=function(){var a=h+1;a>q&&(a=0);n(a)},A=function(){var a=h-1;0>a&&(a=q);n(a)},C=function(a,b){a.one("transitionend webkitTransitionEnd oTransitionEnd",function(a){b(a)});D("transition")||a.trigger("transitionend")},D=function(a){var b=!1,c=["Webkit","Moz","O","ms","Khtml"],d=document.createElement("div");void 0!==d.style[a]&&(b=!0);if(!1===b)for(var e=0;e<c.length;e++)if(void 0!==d.style[c[e]+a]){b=!0;break}return b};if(null===m)k();else switch(m){case "previous":A();break;case "next":w();
break;case "stopVideoAutoplay":B(g);break;case "startVideoAutoplay":x(g);break;case "startAutoplay":r();break;case "stopAutoplay":clearTimeout(d);break;case "destroy":e.removeData("f4slider"),e.removeAttr(b.f4slider.global.attrKeysEnabled),e.removeAttr(a.attrInit),f.removeAttr(a.attrSlideCurrent),l.removeAttr(a.attrTriggerCurrent),clearTimeout(d),f.unbind("transitionEnd webkitTransitionEnd oTransitionEnd")}})}})(jQuery);